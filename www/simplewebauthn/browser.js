/* [@simplewebauthn/browser]  Version: 4.1.0 - Wednesday, September 1st, 2021, 9:11:50 AM */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SimpleWebAuthnBrowser={})}(this,(function(e){"use strict";function t(e){const t=new Uint8Array(e);let n="";for(const e of t)n+=String.fromCharCode(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function n(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4,r=t.padEnd(t.length+n,"="),o=atob(r),i=new ArrayBuffer(o.length),a=new Uint8Array(i);for(let e=0;e<o.length;e++)a[e]=o.charCodeAt(e);return i}function r(){return void 0!==(null===window||void 0===window?void 0:window.PublicKeyCredential)&&"function"==typeof window.PublicKeyCredential}function o(e){const{id:t}=e;return{...e,id:n(t)}}e.browserSupportsWebauthn=r,e.platformAuthenticatorIsAvailable=async function(){return!!r()&&PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()},e.startAuthentication=async function(e){var i,a;if(!r())throw new Error("WebAuthn is not supported in this browser");let s;0!==(null===(i=e.allowCredentials)||void 0===i?void 0:i.length)&&(s=null===(a=e.allowCredentials)||void 0===a?void 0:a.map(o));const l={...e,challenge:n(e.challenge),allowCredentials:s},c=await navigator.credentials.get({publicKey:l});if(!c)throw new Error("Authentication was not completed");const{id:d,rawId:u,response:p,type:f}=c;let w;var h;return p.userHandle&&(h=p.userHandle,w=new TextDecoder("utf-8").decode(h)),{id:d,rawId:t(u),response:{authenticatorData:t(p.authenticatorData),clientDataJSON:t(p.clientDataJSON),signature:t(p.signature),userHandle:w},type:f,clientExtensionResults:c.getClientExtensionResults()}},e.startRegistration=async function(e){if(!r())throw new Error("WebAuthn is not supported in this browser");const i={...e,challenge:n(e.challenge),user:{...e.user,id:(a=e.user.id,(new TextEncoder).encode(a))},excludeCredentials:e.excludeCredentials.map(o)};var a;const s=await navigator.credentials.create({publicKey:i});if(!s)throw new Error("Registration was not completed");const{id:l,rawId:c,response:d,type:u}=s,p={id:l,rawId:t(c),response:{attestationObject:t(d.attestationObject),clientDataJSON:t(d.clientDataJSON)},type:u,clientExtensionResults:s.getClientExtensionResults()};return"function"==typeof d.getTransports&&(p.transports=d.getTransports()),p},Object.defineProperty(e,"__esModule",{value:!0})}));
